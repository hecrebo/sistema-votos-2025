<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo - Estad√≠sticas Avanzadas Mejoradas</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="estadisticas-avanzadas.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
</head>
<body>
    <div class="app-container">
        <header class="header">
            <div class="header-content">
                <div class="header-top">
                    <div class="logo-container">
                        <img src="logo.jpg" alt="Logo Sistema de Votos" class="header-logo">
                    </div>
                    <h1 class="header-title">üìä Estad√≠sticas Avanzadas - Demo</h1>
                </div>
                <div class="user-info">
                    <span class="user-id">Demo User (Superusuario)</span>
                </div>
            </div>
        </header>

        <main class="main-content">
            <div class="stats-container">
                <!-- Pesta√±as -->
                <div class="stats-tabs">
                    <button class="stats-tab active" data-tab="general">üìä Estad√≠sticas Generales</button>
                    <button class="stats-tab" data-tab="ubch">üèõÔ∏è Por Centro de Votaci√≥n</button>
                    <button class="stats-tab" data-tab="community">üèòÔ∏è Por Comunidad</button>
                </div>

                <!-- Contenido General -->
                <div id="general-content" class="stats-content active">
                    <div class="stats-summary">
                        <h2>üìà Resumen General del Municipio</h2>
                        <div class="stats-summary-grid">
                            <div class="stat-summary">
                                <h4>Total Registrados</h4>
                                <div class="stat-number">2,847</div>
                                <div class="stat-percentage">100%</div>
                            </div>
                            <div class="stat-summary">
                                <h4>Total Votaron</h4>
                                <div class="stat-number">1,923</div>
                                <div class="stat-percentage">67.5%</div>
                            </div>
                            <div class="stat-summary">
                                <h4>Centros de Votaci√≥n</h4>
                                <div class="stat-number">24</div>
                                <div class="stat-percentage">Activos</div>
                            </div>
                            <div class="stat-summary">
                                <h4>Comunidades</h4>
                                <div class="stat-number">156</div>
                                <div class="stat-percentage">Participando</div>
                            </div>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stats-card">
                            <h3>üë• Distribuci√≥n por Sexo</h3>
                            <div class="stats-list">
                                <div class="stats-item">
                                    <span class="stats-item-name">Masculino</span>
                                    <span class="stats-item-count">1,023</span>
                                </div>
                                <div class="stats-item">
                                    <span class="stats-item-name">Femenino</span>
                                    <span class="stats-item-count">900</span>
                                </div>
                            </div>
                        </div>

                        <div class="stats-card">
                            <h3>üìÖ Distribuci√≥n por Edad</h3>
                            <div class="stats-list">
                                <div class="stats-item">
                                    <span class="stats-item-name">16-25 a√±os</span>
                                    <span class="stats-item-count">245</span>
                                </div>
                                <div class="stats-item">
                                    <span class="stats-item-name">26-35 a√±os</span>
                                    <span class="stats-item-count">387</span>
                                </div>
                                <div class="stats-item">
                                    <span class="stats-item-name">36-45 a√±os</span>
                                    <span class="stats-item-count">456</span>
                                </div>
                                <div class="stats-item">
                                    <span class="stats-item-name">46-55 a√±os</span>
                                    <span class="stats-item-count">423</span>
                                </div>
                                <div class="stats-item">
                                    <span class="stats-item-name">56-65 a√±os</span>
                                    <span class="stats-item-count">312</span>
                                </div>
                                <div class="stats-item">
                                    <span class="stats-item-name">66+ a√±os</span>
                                    <span class="stats-item-count">100</span>
                                </div>
                            </div>
                        </div>

                        <div class="stats-card">
                            <h3>üèõÔ∏è Todos los Centros de Votaci√≥n</h3>
                            <div class="stats-list" id="demo-all-ubch">
                                <!-- Se llenar√° din√°micamente -->
                            </div>
                        </div>

                        <div class="stats-card">
                            <h3>üèòÔ∏è Todas las Comunidades</h3>
                            <div class="stats-list" id="demo-all-communities">
                                <!-- Se llenar√° din√°micamente -->
                            </div>
                        </div>
                    </div>

                    <div class="charts-grid">
                        <div class="chart-container">
                            <h3 class="chart-title">üìä Top 15 Centros de Votaci√≥n</h3>
                            <canvas id="demo-ubch-chart"></canvas>
                        </div>
                        <div class="chart-container">
                            <h3 class="chart-title">üç© Distribuci√≥n por Comunidades</h3>
                            <canvas id="demo-community-chart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Contenido por Centro de Votaci√≥n -->
                <div id="ubch-content" class="stats-content">
                    <div class="export-buttons">
                        <button class="export-btn pdf">üìÑ Exportar PDF</button>
                        <button class="export-btn csv">üìä Exportar CSV</button>
                    </div>
                    
                    <div class="charts-grid">
                        <div class="chart-container">
                            <h3 class="chart-title">üìà Participaci√≥n por Centro de Votaci√≥n</h3>
                            <canvas id="demo-ubch-comparison-chart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Contenido por Comunidad -->
                <div id="community-content" class="stats-content">
                    <div class="export-buttons">
                        <button class="export-btn pdf">üìÑ Exportar PDF</button>
                        <button class="export-btn csv">üìä Exportar CSV</button>
                    </div>
                    
                    <div class="charts-grid">
                        <div class="chart-container">
                            <h3 class="chart-title">üìà Participaci√≥n por Comunidad</h3>
                            <canvas id="demo-community-comparison-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Datos de demostraci√≥n
        const demoData = {
            ubch: [
                { name: "CV San Jos√©", votes: 156, total: 200 },
                { name: "CV La Victoria", votes: 143, total: 180 },
                { name: "CV El Para√≠so", votes: 134, total: 165 },
                { name: "CV Los Rosales", votes: 128, total: 155 },
                { name: "CV San Pedro", votes: 119, total: 145 },
                { name: "CV La Paz", votes: 112, total: 135 },
                { name: "CV El Carmen", votes: 105, total: 125 },
                { name: "CV San Antonio", votes: 98, total: 115 },
                { name: "CV La Trinidad", votes: 91, total: 105 },
                { name: "CV San Francisco", votes: 84, total: 95 },
                { name: "CV El Valle", votes: 77, total: 85 },
                { name: "CV La Esperanza", votes: 70, total: 75 },
                { name: "CV San Miguel", votes: 63, total: 65 },
                { name: "CV El Progreso", votes: 56, total: 55 },
                { name: "CV La Uni√≥n", votes: 49, total: 45 }
            ],
            communities: [
                { name: "San Jos√©", votes: 89 },
                { name: "La Victoria", votes: 76 },
                { name: "El Para√≠so", votes: 67 },
                { name: "Los Rosales", votes: 58 },
                { name: "San Pedro", votes: 52 },
                { name: "La Paz", votes: 48 },
                { name: "El Carmen", votes: 43 },
                { name: "San Antonio", votes: 39 },
                { name: "La Trinidad", votes: 35 },
                { name: "San Francisco", votes: 31 },
                { name: "El Valle", votes: 28 },
                { name: "La Esperanza", votes: 25 },
                { name: "San Miguel", votes: 22 },
                { name: "El Progreso", votes: 19 },
                { name: "La Uni√≥n", votes: 16 }
            ]
        };

        // Funci√≥n para llenar las listas
        function fillDemoLists() {
            const ubchContainer = document.getElementById('demo-all-ubch');
            const communitiesContainer = document.getElementById('demo-all-communities');

            // Llenar UBCH
            demoData.ubch.forEach(item => {
                const div = document.createElement('div');
                div.className = 'stats-item';
                div.innerHTML = `
                    <span class="stats-item-name">${item.name}</span>
                    <span class="stats-item-count">${item.votes.toLocaleString()}</span>
                `;
                ubchContainer.appendChild(div);
            });

            // Llenar Comunidades
            demoData.communities.forEach(item => {
                const div = document.createElement('div');
                div.className = 'stats-item';
                div.innerHTML = `
                    <span class="stats-item-name">${item.name}</span>
                    <span class="stats-item-count">${item.votes.toLocaleString()}</span>
                `;
                communitiesContainer.appendChild(div);
            });
        }

        // Funci√≥n para crear gr√°ficos
        function createDemoCharts() {
            // Gr√°fico de UBCH
            const ubchCtx = document.getElementById('demo-ubch-chart').getContext('2d');
            new Chart(ubchCtx, {
                type: 'bar',
                data: {
                    labels: demoData.ubch.map(item => item.name),
                    datasets: [{
                        label: 'Votos Confirmados',
                        data: demoData.ubch.map(item => item.votes),
                        backgroundColor: [
                            'rgba(102, 126, 234, 0.9)',
                            'rgba(118, 75, 162, 0.9)',
                            'rgba(255, 99, 132, 0.9)',
                            'rgba(54, 162, 235, 0.9)',
                            'rgba(255, 206, 86, 0.9)',
                            'rgba(75, 192, 192, 0.9)',
                            'rgba(153, 102, 255, 0.9)',
                            'rgba(255, 159, 64, 0.9)',
                            'rgba(199, 199, 199, 0.9)',
                            'rgba(83, 102, 255, 0.9)',
                            'rgba(255, 99, 132, 0.9)',
                            'rgba(54, 162, 235, 0.9)',
                            'rgba(255, 206, 86, 0.9)',
                            'rgba(75, 192, 192, 0.9)',
                            'rgba(153, 102, 255, 0.9)'
                        ],
                        borderColor: [
                            'rgba(102, 126, 234, 1)',
                            'rgba(118, 75, 162, 1)',
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            'rgba(255, 159, 64, 1)',
                            'rgba(199, 199, 199, 1)',
                            'rgba(83, 102, 255, 1)',
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)'
                        ],
                        borderWidth: 2,
                        borderRadius: 8,
                        borderSkipped: false,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: 'white',
                            bodyColor: 'white',
                            borderColor: 'rgba(102, 126, 234, 1)',
                            borderWidth: 1,
                            cornerRadius: 8,
                            displayColors: false,
                            callbacks: {
                                label: function(context) {
                                    return `Votos: ${context.parsed.y.toLocaleString()}`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)',
                                drawBorder: false
                            },
                            ticks: {
                                color: '#666',
                                font: {
                                    size: 12
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                color: '#666',
                                font: {
                                    size: 11
                                },
                                maxRotation: 45,
                                minRotation: 45
                            }
                        }
                    }
                }
            });

            // Gr√°fico de Comunidades
            const communityCtx = document.getElementById('demo-community-chart').getContext('2d');
            new Chart(communityCtx, {
                type: 'doughnut',
                data: {
                    labels: demoData.communities.map(item => item.name),
                    datasets: [{
                        data: demoData.communities.map(item => item.votes),
                        backgroundColor: [
                            'rgba(102, 126, 234, 0.9)',
                            'rgba(118, 75, 162, 0.9)',
                            'rgba(255, 99, 132, 0.9)',
                            'rgba(54, 162, 235, 0.9)',
                            'rgba(255, 206, 86, 0.9)',
                            'rgba(75, 192, 192, 0.9)',
                            'rgba(153, 102, 255, 0.9)',
                            'rgba(255, 159, 64, 0.9)',
                            'rgba(199, 199, 199, 0.9)',
                            'rgba(83, 102, 255, 0.9)',
                            'rgba(255, 99, 132, 0.9)',
                            'rgba(54, 162, 235, 0.9)',
                            'rgba(255, 206, 86, 0.9)',
                            'rgba(75, 192, 192, 0.9)',
                            'rgba(153, 102, 255, 0.9)'
                        ],
                        borderColor: 'white',
                        borderWidth: 3,
                        hoverBorderWidth: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: {
                                color: '#333',
                                font: {
                                    size: 12
                                },
                                padding: 20,
                                usePointStyle: true
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: 'white',
                            bodyColor: 'white',
                            borderColor: 'rgba(118, 75, 162, 1)',
                            borderWidth: 1,
                            cornerRadius: 8,
                            callbacks: {
                                label: function(context) {
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = ((context.parsed / total) * 100).toFixed(1);
                                    return `${context.label}: ${context.parsed.toLocaleString()} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });

            // Gr√°fico de comparaci√≥n UBCH
            const ubchComparisonCtx = document.getElementById('demo-ubch-comparison-chart').getContext('2d');
            new Chart(ubchComparisonCtx, {
                type: 'bar',
                data: {
                    labels: demoData.ubch.map(item => item.name),
                    datasets: [{
                        label: 'Tasa de Participaci√≥n (%)',
                        data: demoData.ubch.map(item => (item.votes / item.total * 100).toFixed(1)),
                        backgroundColor: 'rgba(102, 126, 234, 0.8)',
                        borderColor: 'rgba(102, 126, 234, 1)',
                        borderWidth: 2,
                        borderRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: 'white',
                            bodyColor: 'white',
                            borderColor: 'rgba(102, 126, 234, 1)',
                            borderWidth: 1,
                            cornerRadius: 8,
                            callbacks: {
                                label: function(context) {
                                    return `Participaci√≥n: ${context.parsed.y.toFixed(1)}%`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)',
                                drawBorder: false
                            },
                            ticks: {
                                color: '#666',
                                font: {
                                    size: 12
                                },
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                color: '#666',
                                font: {
                                    size: 11
                                },
                                maxRotation: 45,
                                minRotation: 45
                            }
                        }
                    }
                }
            });

            // Gr√°fico de comparaci√≥n Comunidades
            const communityComparisonCtx = document.getElementById('demo-community-comparison-chart').getContext('2d');
            new Chart(communityComparisonCtx, {
                type: 'line',
                data: {
                    labels: demoData.communities.map(item => item.name),
                    datasets: [{
                        label: 'Votos por Comunidad',
                        data: demoData.communities.map(item => item.votes),
                        borderColor: 'rgba(118, 75, 162, 1)',
                        backgroundColor: 'rgba(118, 75, 162, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: 'rgba(118, 75, 162, 1)',
                        pointBorderColor: 'white',
                        pointBorderWidth: 2,
                        pointRadius: 6,
                        pointHoverRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: 'white',
                            bodyColor: 'white',
                            borderColor: 'rgba(118, 75, 162, 1)',
                            borderWidth: 1,
                            cornerRadius: 8,
                            callbacks: {
                                label: function(context) {
                                    return `Votos: ${context.parsed.y.toLocaleString()}`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)',
                                drawBorder: false
                            },
                            ticks: {
                                color: '#666',
                                font: {
                                    size: 12
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                color: '#666',
                                font: {
                                    size: 11
                                },
                                maxRotation: 45,
                                minRotation: 45
                            }
                        }
                    }
                }
            });
        }

        // Funci√≥n para manejar las pesta√±as
        function setupTabs() {
            document.querySelectorAll('.stats-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remover active de todos los tabs
                    document.querySelectorAll('.stats-tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.stats-content').forEach(c => c.classList.remove('active'));
                    
                    // Activar tab seleccionado
                    tab.classList.add('active');
                    const tabName = tab.dataset.tab;
                    document.getElementById(`${tabName}-content`).classList.add('active');
                });
            });
        }

        // Inicializar cuando el DOM est√© listo
        document.addEventListener('DOMContentLoaded', function() {
            fillDemoLists();
            createDemoCharts();
            setupTabs();
        });
    </script>
</body>
</html> 