// Datos de UBCH y Comunidades para el sistema de votos
// Edita este archivo manualmente para agregar, quitar o modificar UBCH y comunidades

window.UBCH_DATA = [
    { id: '1', code: 'UBCH001', name: 'COLEGIO ASUNCION BELTRAN', description: 'Unidad de Batalla Bolívar-Chávez Asunción Beltrán' },
    { id: '2', code: 'UBCH002', name: 'LICEO JOSE FELIX RIBAS', description: 'Unidad de Batalla Bolívar-Chávez José Félix Ribas' },
    { id: '3', code: 'UBCH003', name: 'ESCUELA PRIMARIA BOLIVARIANA LA PRADERA', description: 'Unidad de Batalla Bolívar-Chávez La Pradera' },
    { id: '4', code: 'UBCH004', name: 'CASA COMUNAL JOSE TOMAS GALLARDO', description: 'Unidad de Batalla Bolívar-Chávez José Tomás Gallardo' },
    { id: '5', code: 'UBCH005', name: 'ESCUELA 5 DE JULIO', description: 'Unidad de Batalla Bolívar-Chávez 5 de Julio' },
    { id: '6', code: 'UBCH006', name: 'ESCUELA CECILIO ACOSTA', description: 'Unidad de Batalla Bolívar-Chávez Cecilio Acosta' },
    { id: '7', code: 'UBCH007', name: 'ESCUELA BASICA FE Y ALEGRIA', description: 'Unidad de Batalla Bolívar-Chávez Fe y Alegría' },
    { id: '8', code: 'UBCH008', name: 'ESCUELA GRADUADA ANTONIO JOSE DE SUCRE', description: 'Unidad de Batalla Bolívar-Chávez Antonio José de Sucre' },
    { id: '9', code: 'UBCH009', name: 'CASA COMUNAL', description: 'Unidad de Batalla Bolívar-Chávez Casa Comunal' },
    { id: '10', code: 'UBCH010', name: 'UNIDAD EDUCATIVA MONSEÑOR JACINTO SOTO LAYERA', description: 'Unidad de Batalla Bolívar-Chávez Monseñor Jacinto Soto Layera' },
    { id: '11', code: 'UBCH011', name: 'BASE DE MISIONES LUISA CACERES DE ARISMENDI', description: 'Unidad de Batalla Bolívar-Chávez Luisa Cáceres de Arismendi' },
    { id: '12', code: 'UBCH012', name: 'ESCUELA ESTADAL ALEJO ZULOAGA', description: 'Unidad de Batalla Bolívar-Chávez Alejo Zuloaga' },
    { id: '13', code: 'UBCH013', name: 'UNIDAD EDUCATIVA MONSEÑOR MONTES DE OCA', description: 'Unidad de Batalla Bolívar-Chávez Monseñor Montes de Oca' },
    { id: '14', code: 'UBCH014', name: 'ESCUELA BASICA NACIONAL CONCENTRADA LA ESTACION', description: 'Unidad de Batalla Bolívar-Chávez La Estación' },
    { id: '15', code: 'UBCH015', name: 'ESCUELA RECEPTORIA', description: 'Unidad de Batalla Bolívar-Chávez Escuela Receptoria' },
    { id: '16', code: 'UBCH016', name: 'GRUPO ESCOLAR DR RAFAEL PEREZ', description: 'Unidad de Batalla Bolívar-Chávez Dr. Rafael Pérez' },
    { id: '17', code: 'UBCH017', name: 'LICEO ALFREDO PIETRI', description: 'Unidad de Batalla Bolívar-Chávez Alfredo Pietri' },
    { id: '18', code: 'UBCH018', name: 'ESCUELA BOLIVARIANA ROMERO GARCIA', description: 'Unidad de Batalla Bolívar-Chávez Romero García' },
    { id: '19', code: 'UBCH019', name: 'ESCUELA GRADUADA PEDRO GUAL', description: 'Unidad de Batalla Bolívar-Chávez Pedro Gual' }
];

window.COMMUNITIES_DATA = [
    // COLEGIO ASUNCION BELTRAN
    { id: '1', ubchId: '1', ubchName: 'COLEGIO ASUNCION BELTRAN', code: 'COM001', name: 'EL VALLE', description: 'Comunidad El Valle' },
    { id: '2', ubchId: '1', ubchName: 'COLEGIO ASUNCION BELTRAN', code: 'COM002', name: 'VILLA OASIS', description: 'Comunidad Villa Oasis' },
    { id: '3', ubchId: '1', ubchName: 'COLEGIO ASUNCION BELTRAN', code: 'COM003', name: 'VILLAS DEL CENTRO 3ERA ETAPA B', description: 'Comunidad Villas del Centro 3era Etapa B' },
    { id: '4', ubchId: '1', ubchName: 'COLEGIO ASUNCION BELTRAN', code: 'COM004', name: 'VILLAS DEL CENTRO 3ERA ETAPA C', description: 'Comunidad Villas del Centro 3era Etapa C' },
    { id: '5', ubchId: '1', ubchName: 'COLEGIO ASUNCION BELTRAN', code: 'COM005', name: 'VILLAS DEL CENTRO 4A ETAPA', description: 'Comunidad Villas del Centro 4a Etapa' },
    { id: '6', ubchId: '1', ubchName: 'COLEGIO ASUNCION BELTRAN', code: 'COM006', name: 'LA CAMACHERA', description: 'Comunidad La Camachera' },
    
    // LICEO JOSE FELIX RIBAS
    { id: '7', ubchId: '2', ubchName: 'LICEO JOSE FELIX RIBAS', code: 'COM007', name: 'EL CUJIJAL', description: 'Comunidad El Cujijal' },
    { id: '8', ubchId: '2', ubchName: 'LICEO JOSE FELIX RIBAS', code: 'COM008', name: 'LAS FLORES', description: 'Comunidad Las Flores' },
    { id: '9', ubchId: '2', ubchName: 'LICEO JOSE FELIX RIBAS', code: 'COM009', name: 'LAS ESPERANZA 200', description: 'Comunidad Las Esperanza 200' },
    { id: '10', ubchId: '2', ubchName: 'LICEO JOSE FELIX RIBAS', code: 'COM010', name: 'VILLAS DEL CENTRO 2ERA ETAPA A', description: 'Comunidad Villas del Centro 2era Etapa A' },
    { id: '11', ubchId: '2', ubchName: 'LICEO JOSE FELIX RIBAS', code: 'COM011', name: 'LOS PALOMARES', description: 'Comunidad Los Palomares' },
    { id: '12', ubchId: '2', ubchName: 'LICEO JOSE FELIX RIBAS', code: 'COM012', name: 'EL LAGO', description: 'Comunidad El Lago' },
    { id: '13', ubchId: '2', ubchName: 'LICEO JOSE FELIX RIBAS', code: 'COM013', name: 'CAIPARICALLY I II', description: 'Comunidad Caiparically I II' },
    { id: '14', ubchId: '2', ubchName: 'LICEO JOSE FELIX RIBAS', code: 'COM014', name: 'EL BANCO', description: 'Comunidad El Banco' },
    { id: '15', ubchId: '2', ubchName: 'LICEO JOSE FELIX RIBAS', code: 'COM015', name: 'CAIPARICHA I Y II', description: 'Comunidad Caiparicha I Y II' },
    
    // ESCUELA PRIMARIA BOLIVARIANA LA PRADERA
    { id: '16', ubchId: '3', ubchName: 'ESCUELA PRIMARIA BOLIVARIANA LA PRADERA', code: 'COM016', name: 'EL SAMAN', description: 'Comunidad El Samán' },
    { id: '17', ubchId: '3', ubchName: 'ESCUELA PRIMARIA BOLIVARIANA LA PRADERA', code: 'COM017', name: 'GUADALUPE', description: 'Comunidad Guadalupe' },
    { id: '18', ubchId: '3', ubchName: 'ESCUELA PRIMARIA BOLIVARIANA LA PRADERA', code: 'COM018', name: 'PALOS GRANDES II', description: 'Comunidad Palos Grandes II' },
    { id: '19', ubchId: '3', ubchName: 'ESCUELA PRIMARIA BOLIVARIANA LA PRADERA', code: 'COM019', name: 'PALOS GRANDES I', description: 'Comunidad Palos Grandes I' },
    { id: '20', ubchId: '3', ubchName: 'ESCUELA PRIMARIA BOLIVARIANA LA PRADERA', code: 'COM020', name: 'TIERRA DEL SOL', description: 'Comunidad Tierra del Sol' },
    { id: '21', ubchId: '3', ubchName: 'ESCUELA PRIMARIA BOLIVARIANA LA PRADERA', code: 'COM021', name: 'LA CASTELLANA', description: 'Comunidad La Castellana' },
    { id: '22', ubchId: '3', ubchName: 'ESCUELA PRIMARIA BOLIVARIANA LA PRADERA', code: 'COM022', name: 'GARDENIAS I', description: 'Comunidad Gardenias I' },
    { id: '23', ubchId: '3', ubchName: 'ESCUELA PRIMARIA BOLIVARIANA LA PRADERA', code: 'COM023', name: 'GARDENIAS II', description: 'Comunidad Gardenias II' },
    { id: '24', ubchId: '3', ubchName: 'ESCUELA PRIMARIA BOLIVARIANA LA PRADERA', code: 'COM024', name: 'EL CERCADITO', description: 'Comunidad El Cercadito' },
    { id: '25', ubchId: '3', ubchName: 'ESCUELA PRIMARIA BOLIVARIANA LA PRADERA', code: 'COM025', name: 'ALTAMIRA', description: 'Comunidad Altamira' },
    { id: '26', ubchId: '3', ubchName: 'ESCUELA PRIMARIA BOLIVARIANA LA PRADERA', code: 'COM026', name: 'LA ADJUNTADA', description: 'Comunidad La Adjuntada' },
    { id: '27', ubchId: '3', ubchName: 'ESCUELA PRIMARIA BOLIVARIANA LA PRADERA', code: 'COM027', name: 'BUCARES', description: 'Comunidad Bucares' },
    { id: '28', ubchId: '3', ubchName: 'ESCUELA PRIMARIA BOLIVARIANA LA PRADERA', code: 'COM028', name: 'GUAYABAL', description: 'Comunidad Guayabal' },
    { id: '29', ubchId: '3', ubchName: 'ESCUELA PRIMARIA BOLIVARIANA LA PRADERA', code: 'COM029', name: 'APARTATE', description: 'Comunidad Apartate' },
    { id: '30', ubchId: '3', ubchName: 'ESCUELA PRIMARIA BOLIVARIANA LA PRADERA', code: 'COM030', name: 'EL REFUGIO', description: 'Comunidad El Refugio' },
    { id: '31', ubchId: '3', ubchName: 'ESCUELA PRIMARIA BOLIVARIANA LA PRADERA', code: 'COM031', name: 'LOS ROBLES', description: 'Comunidad Los Robles' },
    { id: '32', ubchId: '3', ubchName: 'ESCUELA PRIMARIA BOLIVARIANA LA PRADERA', code: 'COM032', name: 'ARAUCARIA', description: 'Comunidad Araucaria' },
    
    // CASA COMUNAL JOSE TOMAS GALLARDO
    { id: '33', ubchId: '4', ubchName: 'CASA COMUNAL JOSE TOMAS GALLARDO', code: 'COM033', name: 'JOSE TOMAS GALLARDO A', description: 'Comunidad José Tomás Gallardo A' },
    { id: '34', ubchId: '4', ubchName: 'CASA COMUNAL JOSE TOMAS GALLARDO', code: 'COM034', name: 'LA PRIMAVERA', description: 'Comunidad La Primavera' },
    
    // ESCUELA 5 DE JULIO
    { id: '35', ubchId: '5', ubchName: 'ESCUELA 5 DE JULIO', code: 'COM035', name: '10 DE AGOSTO', description: 'Comunidad 10 de Agosto' },
    { id: '36', ubchId: '5', ubchName: 'ESCUELA 5 DE JULIO', code: 'COM036', name: 'CAMPO ALEGRE I', description: 'Comunidad Campo Alegre I' },
    { id: '37', ubchId: '5', ubchName: 'ESCUELA 5 DE JULIO', code: 'COM037', name: 'CAMPO ALEGRE II', description: 'Comunidad Campo Alegre II' },
    { id: '38', ubchId: '5', ubchName: 'ESCUELA 5 DE JULIO', code: 'COM038', name: '5 DE JULIO', description: 'Comunidad 5 de Julio' },
    
    // ESCUELA CECILIO ACOSTA
    { id: '39', ubchId: '6', ubchName: 'ESCUELA CECILIO ACOSTA', code: 'COM039', name: 'VOLUNTAD DE DIOS', description: 'Comunidad Voluntad de Dios' },
    { id: '40', ubchId: '6', ubchName: 'ESCUELA CECILIO ACOSTA', code: 'COM040', name: 'LAS MATWINAS', description: 'Comunidad Las Matwinas' },
    { id: '41', ubchId: '6', ubchName: 'ESCUELA CECILIO ACOSTA', code: 'COM041', name: 'BRISAS DEL LAGO', description: 'Comunidad Brisas del Lago' },
    { id: '42', ubchId: '6', ubchName: 'ESCUELA CECILIO ACOSTA', code: 'COM042', name: 'MANDANTO', description: 'Comunidad Mandanto' },
    { id: '43', ubchId: '6', ubchName: 'ESCUELA CECILIO ACOSTA', code: 'COM043', name: 'INDIANAPOLIS', description: 'Comunidad Indianapolis' },
    { id: '44', ubchId: '6', ubchName: 'ESCUELA CECILIO ACOSTA', code: 'COM044', name: 'SUR DE ACOSTA', description: 'Comunidad Sur de Acosta' },
    
    // ESCUELA BASICA FE Y ALEGRIA
    { id: '45', ubchId: '7', ubchName: 'ESCUELA BASICA FE Y ALEGRIA', code: 'COM045', name: 'FE Y ALEGRIA', description: 'Comunidad Fe y Alegría' },
    { id: '46', ubchId: '7', ubchName: 'ESCUELA BASICA FE Y ALEGRIA', code: 'COM046', name: 'BARRIO SOLIDARIO', description: 'Comunidad Barrio Solidario' },
    { id: '47', ubchId: '7', ubchName: 'ESCUELA BASICA FE Y ALEGRIA', code: 'COM047', name: 'COMUNIDAD FUTURO', description: 'Comunidad Futuro' },
    
    // ESCUELA GRADUADA ANTONIO JOSE DE SUCRE
    { id: '48', ubchId: '8', ubchName: 'ESCUELA GRADUADA ANTONIO JOSE DE SUCRE', code: 'COM048', name: 'JESUS DE NAZARETH', description: 'Comunidad Jesús de Nazaret' },
    { id: '49', ubchId: '8', ubchName: 'ESCUELA GRADUADA ANTONIO JOSE DE SUCRE', code: 'COM049', name: 'SECTOR BOLIVAR', description: 'Comunidad Sector Bolívar' },
    { id: '50', ubchId: '8', ubchName: 'ESCUELA GRADUADA ANTONIO JOSE DE SUCRE', code: 'COM050', name: 'PALO NEGRO ESTE', description: 'Comunidad Palo Negro Este' },
    
    // CASA COMUNAL
    { id: '51', ubchId: '9', ubchName: 'CASA COMUNAL', code: 'COM051', name: 'LOS JABILLOS', description: 'Comunidad Los Jabillos' },
    
    // UNIDAD EDUCATIVA MONSEÑOR JACINTO SOTO LAYERA
    { id: '52', ubchId: '10', ubchName: 'UNIDAD EDUCATIVA MONSEÑOR JACINTO SOTO LAYERA', code: 'COM052', name: 'PROLONGACION MIRANDA', description: 'Comunidad Prolongación Miranda' },
    { id: '53', ubchId: '10', ubchName: 'UNIDAD EDUCATIVA MONSEÑOR JACINTO SOTO LAYERA', code: 'COM053', name: 'SANTA EDUVIGES II', description: 'Comunidad Santa Eduviges II' },
    
    // BASE DE MISIONES LUISA CACERES DE ARISMENDI
    { id: '54', ubchId: '11', ubchName: 'BASE DE MISIONES LUISA CACERES DE ARISMENDI', code: 'COM054', name: '24 DE ENERO', description: 'Comunidad 24 de Enero' },
    { id: '55', ubchId: '11', ubchName: 'BASE DE MISIONES LUISA CACERES DE ARISMENDI', code: 'COM055', name: '19 DE ABRIL', description: 'Comunidad 19 de Abril' },
    { id: '56', ubchId: '11', ubchName: 'BASE DE MISIONES LUISA CACERES DE ARISMENDI', code: 'COM056', name: 'EL PROGRESO', description: 'Comunidad El Progreso' },
    
    // ESCUELA ESTADAL ALEJO ZULOAGA
    { id: '57', ubchId: '12', ubchName: 'ESCUELA ESTADAL ALEJO ZULOAGA', code: 'COM057', name: 'MAIQUETIA', description: 'Comunidad Maiquetía' },
    { id: '58', ubchId: '12', ubchName: 'ESCUELA ESTADAL ALEJO ZULOAGA', code: 'COM058', name: 'SAENZ', description: 'Comunidad Sáenz' },
    { id: '59', ubchId: '12', ubchName: 'ESCUELA ESTADAL ALEJO ZULOAGA', code: 'COM059', name: 'PANAMERICANO', description: 'Comunidad Panamericano' },
    
    // UNIDAD EDUCATIVA MONSEÑOR MONTES DE OCA
    { id: '60', ubchId: '13', ubchName: 'UNIDAD EDUCATIVA MONSEÑOR MONTES DE OCA', code: 'COM060', name: 'REMEDIOS', description: 'Comunidad Remedios' },
    
    // ESCUELA BASICA NACIONAL CONCENTRADA LA ESTACION
    { id: '61', ubchId: '14', ubchName: 'ESCUELA BASICA NACIONAL CONCENTRADA LA ESTACION', code: 'COM061', name: '18 DE OCTUBRE', description: 'Comunidad 18 de Octubre' },
    
    // ESCUELA RECEPTORIA
    { id: '62', ubchId: '15', ubchName: 'ESCUELA RECEPTORIA', code: 'COM062', name: 'CARMEN CENTRO', description: 'Comunidad Carmen Centro' },
    
    // GRUPO ESCOLAR DR RAFAEL PEREZ
    { id: '63', ubchId: '16', ubchName: 'GRUPO ESCOLAR DR RAFAEL PEREZ', code: 'COM063', name: 'VIRGEN DEL CARMEN', description: 'Comunidad Virgen del Carmen' },
    
    // LICEO ALFREDO PIETRI
    { id: '64', ubchId: '17', ubchName: 'LICEO ALFREDO PIETRI', code: 'COM064', name: 'LOS OJITOS', description: 'Comunidad Los Ojitos' },
    { id: '65', ubchId: '17', ubchName: 'LICEO ALFREDO PIETRI', code: 'COM065', name: 'LOS VENECIANOS', description: 'Comunidad Los Venecianos' },
    
    // ESCUELA BOLIVARIANA ROMERO GARCIA
    { id: '66', ubchId: '18', ubchName: 'ESCUELA BOLIVARIANA ROMERO GARCIA', code: 'COM066', name: 'SAN BERNARDO', description: 'Comunidad San Bernardo' },
    { id: '67', ubchId: '18', ubchName: 'ESCUELA BOLIVARIANA ROMERO GARCIA', code: 'COM067', name: 'LA HACIENDA', description: 'Comunidad La Hacienda' },
    
    // ESCUELA GRADUADA PEDRO GUAL
    { id: '68', ubchId: '19', ubchName: 'ESCUELA GRADUADA PEDRO GUAL', code: 'COM068', name: 'INDIANOS NORTE', description: 'Comunidad Indianos Norte' }
]; 

console.log(window.UBCH_DATA);
console.log(window.COMMUNITIES_DATA);

window.UBCH_DATA.forEach(ubch => {
    const communities = window.COMMUNITIES_DATA.filter(c => c.ubchId === ubch.id).map(c => c.name);
    this.ubchToCommunityMap[ubch.name] = communities;
}); 

const ubchSelect = document.getElementById('ubch');
window.UBCH_DATA.forEach(ubch => {
  const option = document.createElement('option');
  option.value = ubch.id;
  option.textContent = ubch.name;
  ubchSelect.appendChild(option);
}); 

async function waitForUBCHData() {
    return new Promise(resolve => {
        const check = () => {
            if (window.UBCH_DATA && window.UBCH_DATA.length > 0) {
                console.log('UBCH_DATA está listo');
                resolve();
            } else {
                setTimeout(check, 50);
            }
        };
        check();
    });
} 

function renderRegistrationPage() {
    console.log('🔵 Renderizando formulario de registro');
    const ubchSelect = document.getElementById('ubch');
    const communitySelect = document.getElementById('community');
    const form = document.getElementById('registration-form');

    // Limpiar opciones
    ubchSelect.innerHTML = '<option value="">Selecciona una UBCH</option>';
    communitySelect.innerHTML = '<option value="">Selecciona una comunidad</option>';
    communitySelect.disabled = true;

    // Validar datos de UBCH
    if (!window.UBCH_DATA || !Array.isArray(window.UBCH_DATA) || window.UBCH_DATA.length === 0) {
        form.querySelectorAll('input, select, button').forEach(el => el.disabled = true);
        this.showOptimizedMessage('No hay UBCH disponibles. Contacte al administrador.', 'error', 'registration');
        console.error('❌ UBCH_DATA no está disponible o está vacío:', window.UBCH_DATA);
        return;
    } else {
        form.querySelectorAll('input, select, button').forEach(el => el.disabled = false);
    }

    // Llenar UBCH usando ID como value y nombre como texto
    window.UBCH_DATA.forEach(ubch => {
        const option = document.createElement('option');
        option.value = ubch.id;
        option.textContent = ubch.name;
        ubchSelect.appendChild(option);
    });

    // Seleccionar automáticamente la primera UBCH si existe
    if (window.UBCH_DATA.length > 0) {
        ubchSelect.value = window.UBCH_DATA[0].id;
        this.handleUBCHChange(window.UBCH_DATA[0].id);
    }
} 